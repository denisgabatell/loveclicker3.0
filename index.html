<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Love Clicker üíñ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            transition: background-color 0.3s, color 0.3s;
        }
        
        :root {
            --primary: #ff6b8b;
            --secondary: #ff8e9e;
            --accent: #ffccd5;
            --gold: #ffd700;
            --purple: #c77dff;
            --blue: #48cae4;
            --pink: #ff9ff3;
            --green: #00ff9d;
            --diamond: #b9f2ff;
            --dark: #0f0f1a;
            --dark-light: #1a1b2e;
            --light: #fff5f7;
            --text-light: #ffffff;
            --text-dark: #333333;
            --card-bg: rgba(30, 31, 48, 0.8);
            --card-border: rgba(255, 255, 255, 0.05);
        }
        
        body {
            background: linear-gradient(135deg, #0a0a0f 0%, #151522 100%);
            min-height: 100vh;
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow-x: hidden;
            touch-action: manipulation;
            position: relative;
        }
        
        /* –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –§–û–ù - –º–µ–Ω—å—à–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ */
        .dark-bg-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
            background: 
                radial-gradient(circle at 20% 30%, rgba(255, 107, 139, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(199, 125, 255, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(72, 202, 228, 0.02) 0%, transparent 50%);
        }
        
        body.light-theme {
            --dark: #f0f0f0;
            --dark-light: #ffffff;
            --light: #ffeef2;
            --text-light: #333333;
            --text-dark: #000000;
            --card-bg: rgba(255, 255, 255, 0.9);
            --card-border: rgba(0, 0, 0, 0.1);
            background: linear-gradient(135deg, #f0f0f0 0%, #ffffff 100%);
        }
        
        /* –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--dark) 0%, var(--dark-light) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.5s, transform 0.5s;
        }
        
        .studio-container {
            text-align: center;
            animation: float 3s ease-in-out infinite;
        }
        
        .studio-name {
            font-size: 3rem;
            font-weight: 900;
            background: linear-gradient(45deg, 
                #ff6b8b, #ff8e9e, #ffccd5, #c77dff, #48cae4, #00ff9d
            );
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradientFlow 5s ease infinite;
            margin-bottom: 5px;
            text-shadow: 0 0 30px rgba(255, 107, 139, 0.3);
        }
        
        .by-diana {
            font-size: 1rem;
            font-weight: 300;
            color: var(--accent);
            margin-bottom: 30px;
            opacity: 0.8;
        }
        
        .start-button {
            background: linear-gradient(45deg, var(--primary), var(--purple));
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 50px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(255, 107, 139, 0.4);
            margin-top: 20px;
            letter-spacing: 1px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .start-button:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 107, 139, 0.6);
        }
        
        .start-button:active {
            transform: translateY(-2px);
        }
        
        .hearts-container {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .heart-emoji {
            font-size: 1.8rem;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes gradientFlow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        /* –ú–ï–ù–Æ */
        .menu-button {
            position: fixed;
            top: 15px;
            right: 15px;
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, var(--primary), var(--purple));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            z-index: 1001;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            border: 2px solid rgba(255,255,255,0.1);
            opacity: 0;
            transition: opacity 0.5s;
        }
        
        .menu-button.show {
            opacity: 1;
        }
        
        .menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: none;
            backdrop-filter: blur(10px);
        }
        
        .menu-content {
            position: fixed;
            top: 0;
            right: -350px;
            width: 300px;
            height: 100%;
            background: linear-gradient(135deg, var(--dark) 0%, var(--dark-light) 100%);
            z-index: 1001;
            padding: 70px 20px 20px;
            overflow-y: auto;
            transition: right 0.3s ease;
            border-left: 1px solid rgba(255,255,255,0.05);
            box-shadow: -5px 0 30px rgba(0,0,0,0.5);
        }
        
        .menu-section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid var(--card-border);
        }
        
        .menu-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .menu-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
        }
        
        .menu-item:last-child {
            border-bottom: none;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 26px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #333;
            transition: .4s;
            border-radius: 34px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background: linear-gradient(45deg, var(--primary), var(--purple));
        }
        
        input:checked + .slider:before {
            transform: translateX(24px);
        }
        
        /* –ì–ê–õ–ï–†–ï–Ø –ó–í–ï–†–ö–û–í */
        .gallery-section {
            margin-top: 20px;
        }
        
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 15px;
            max-height: 400px;
            overflow-y: auto;
            padding: 5px;
        }
        
        .gallery-item {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
            padding: 5px;
        }
        
        .gallery-item.unlocked {
            background: linear-gradient(135deg, rgba(255, 107, 139, 0.1), rgba(199, 125, 255, 0.1));
            border-color: var(--gold);
        }
        
        .gallery-item.locked {
            opacity: 0.5;
            filter: grayscale(0.8);
            background: rgba(255, 255, 255, 0.03);
        }
        
        .animal-emoji {
            font-size: 24px;
            margin-bottom: 5px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        
        .animal-status {
            font-size: 0.6rem;
            padding: 2px 5px;
            border-radius: 8px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .animal-status.unlocked {
            background: linear-gradient(45deg, 
                #ff6b8b, #ff8e9e, #ffccd5, #c77dff, #48cae4, #00ff9d
            );
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .animal-status.locked {
            background: rgba(255, 255, 255, 0.05);
            color: rgba(255, 255, 255, 0.3);
        }
        
        /* –ö–ù–û–ü–ö–ê –ú–ê–ì–ê–ó–ò–ù–ê */
        .shop-button {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 60px;
            background: linear-gradient(45deg, var(--primary), var(--purple));
            color: white;
            border: none;
            border-radius: 30px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            z-index: 999;
            box-shadow: 0 10px 30px rgba(255, 107, 139, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.1);
            opacity: 0;
            transition: opacity 0.5s, transform 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .shop-button.show {
            opacity: 1;
        }
        
        .shop-button:hover {
            transform: translateX(-50%) translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 107, 139, 0.4);
        }
        
        .shop-button:active {
            transform: translateX(-50%) translateY(-2px);
        }
        
        /* –û–ö–ù–û –ú–ê–ì–ê–ó–ò–ù–ê */
        .shop-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            display: none;
            backdrop-filter: blur(10px);
        }
        
        .shop-window {
            position: fixed;
            bottom: -100%;
            left: 0;
            width: 100%;
            height: 85%;
            background: linear-gradient(135deg, var(--dark) 0%, var(--dark-light) 100%);
            z-index: 1001;
            padding: 20px;
            overflow-y: auto;
            transition: bottom 0.4s ease;
            border-top: 2px solid var(--primary);
            border-radius: 30px 30px 0 0;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
        }
        
        .shop-window-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .shop-window-title {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(45deg, var(--blue), var(--purple));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .close-shop {
            background: linear-gradient(45deg, var(--primary), var(--purple));
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* –û–°–ù–û–í–ù–û–ô –ö–û–ù–¢–ï–ù–¢ */
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 20px 15px;
            position: relative;
            z-index: 2;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s, transform 0.5s;
        }
        
        .container.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* –£–í–ï–î–û–ú–õ–ï–ù–ò–ï –õ–Æ–ë–í–ò */
        .love-notification {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(45deg, 
                rgba(255, 107, 139, 0.9), 
                rgba(199, 125, 255, 0.9)
            );
            color: white;
            padding: 15px 25px;
            border-radius: 50px;
            font-weight: 700;
            z-index: 999;
            opacity: 0;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            text-align: center;
            max-width: 90%;
            animation: loveNotification 10s ease-in-out forwards;
            font-size: 1.1rem;
            letter-spacing: 0.5px;
        }
        
        @keyframes loveNotification {
            0%, 90% { 
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
            10%, 80% { 
                opacity: 1;
                transform: translateX(-50%) translateY(0);
            }
            100% { 
                opacity: 0;
                transform: translateX(-50%) translateY(20px);
            }
        }
        
        .header-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 10px 15px;
            background: var(--card-bg);
            border-radius: 15px;
            border: 1px solid var(--card-border);
        }
        
        .diamond-counter {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--diamond);
            text-shadow: 0 0 10px rgba(185, 242, 255, 0.5);
        }
        
        .smile-text {
            text-align: center;
            margin-bottom: 25px;
            padding: 15px;
            position: relative;
        }
        
        .animated-text {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(45deg, 
                var(--pink), 
                var(--primary), 
                var(--purple), 
                var(--blue),
                var(--green)
            );
            background-size: 300% 300%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: gradientFlow 5s ease infinite;
            text-shadow: 0 0 20px rgba(255, 107, 139, 0.3);
            padding: 10px 20px;
            border-radius: 15px;
            display: inline-block;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .heart-section {
            position: relative;
            margin: 30px 0;
        }
        
        .heart-btn {
            width: 180px;
            height: 180px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 80px;
            cursor: pointer;
            user-select: none;
            border: none;
            box-shadow: 
                0 15px 35px rgba(255, 107, 139, 0.3),
                inset 0 8px 20px rgba(255, 255, 255, 0.1),
                0 0 0 8px rgba(255, 255, 255, 0.05);
            transition: all 0.2s;
            position: relative;
            z-index: 2;
            transform-style: preserve-3d;
        }
        
        .heart-btn:active {
            transform: scale(0.92);
            box-shadow: 
                0 5px 15px rgba(255, 107, 139, 0.4),
                inset 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .stat-card {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 20px 15px;
            text-align: center;
            border: 1px solid var(--card-border);
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--primary), var(--purple));
        }
        
        .stat-icon {
            font-size: 1.8rem;
            margin-bottom: 10px;
            display: block;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--gold);
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
            display: block;
        }
        
        .stat-label {
            font-size: 0.85rem;
            color: var(--accent);
            opacity: 0.8;
            margin-top: 5px;
        }
        
        .upgrade-item {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            padding: 18px;
            margin-bottom: 15px;
            border: 1px solid var(--card-border);
            position: relative;
            overflow: hidden;
        }
        
        .upgrade-item.locked {
            opacity: 0.5;
            filter: grayscale(0.8);
        }
        
        .upgrade-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .upgrade-name {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .upgrade-cost {
            background: rgba(255, 215, 0, 0.1);
            color: var(--gold);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            border: 1px solid rgba(255, 215, 0, 0.1);
        }
        
        .diamond-cost {
            background: rgba(185, 242, 255, 0.1);
            color: var(--diamond);
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            border: 1px solid rgba(185, 242, 255, 0.1);
        }
        
        .upgrade-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            font-size: 0.9rem;
            color: var(--accent);
        }
        
        .upgrade-effect {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .upgrade-count {
            color: var(--blue);
            font-weight: 600;
        }
        
        .upgrade-requirement {
            color: rgba(255, 107, 139, 0.7);
            font-size: 0.8rem;
            margin-top: 5px;
        }
        
        .buy-btn {
            background: linear-gradient(45deg, var(--primary), var(--purple));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 12px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            margin-top: 15px;
            position: relative;
            overflow: hidden;
            letter-spacing: 0.5px;
        }
        
        .buy-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255, 107, 139, 0.3);
        }
        
        .buy-btn:active:not(:disabled) {
            transform: translateY(0);
        }
        
        .buy-btn.enabled {
            background: linear-gradient(45deg, var(--primary), var(--purple));
        }
        
        .buy-btn.disabled {
            background: linear-gradient(45deg, #333, #444);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
            opacity: 0.6;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(-100px);
            background: linear-gradient(45deg, var(--primary), var(--purple));
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: 600;
            z-index: 1000;
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            text-align: center;
            max-width: 90%;
            box-shadow: 0 10px 30px rgba(255, 107, 139, 0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .notification.show {
            opacity: 1;
            transform: translateX(-50%) translateY(0);
        }
        
        .save-icon {
            position: fixed;
            bottom: 80px;
            left: 20px;
            font-size: 24px;
            opacity: 0;
            transform: translateY(10px);
            transition: all 0.3s;
            z-index: 10000;
            pointer-events: none;
        }
        
        @media (max-width: 480px) {
            .studio-name {
                font-size: 2.2rem;
            }
            
            .start-button {
                padding: 15px 30px;
                font-size: 1.1rem;
            }
            
            .heart-btn {
                width: 150px;
                height: 150px;
                font-size: 60px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .animated-text {
                font-size: 1.4rem;
            }
            
            .menu-content {
                width: 280px;
            }
            
            .shop-button {
                width: 180px;
                height: 50px;
                font-size: 1.1rem;
            }
            
            .gallery-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 8px;
            }
            
            .animal-emoji {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- –£–ü–†–û–©–ï–ù–ù–´–ô –§–û–ù -->
    <div class="dark-bg-animation"></div>
    
    <!-- –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò -->
    <div class="loading-screen" id="loadingScreen">
        <div class="studio-container">
            <div class="studio-name">gromoov_studio</div>
            <div class="by-diana">by Diana</div>
            
            <button class="start-button" id="startButton">
                –ù–ê–ß–ê–¢–¨ –ò–ì–†–£
            </button>
            
            <div class="hearts-container">
                <div class="heart-emoji">üíñ</div>
                <div class="heart-emoji">üíï</div>
                <div class="heart-emoji">üíù</div>
                <div class="heart-emoji">üíò</div>
                <div class="heart-emoji">üíì</div>
            </div>
        </div>
    </div>
    
    <!-- –ê–£–î–ò–û –ü–õ–ï–ï–† -->
    <audio id="backgroundMusic" loop>
        <source src="https://github.com/denisgabatell/musicfone0222/raw/main/snowfall_w_%C3%98neheart.mp3" type="audio/mpeg">
    </audio>
    
    <!-- –ö–ù–û–ü–ö–ê –ú–ï–ù–Æ -->
    <div class="menu-button" id="menuButton">
        ‚öôÔ∏è
    </div>
    
    <!-- –ö–ù–û–ü–ö–ê –ú–ê–ì–ê–ó–ò–ù–ê -->
    <button class="shop-button" id="shopButton">
        üõí –ú–ê–ì–ê–ó–ò–ù
    </button>
    
    <!-- –ò–ö–û–ù–ö–ê –°–û–•–†–ê–ù–ï–ù–ò–Ø -->
    <div class="save-icon" id="saveIcon">üíæ</div>
    
    <!-- –ú–ï–ù–Æ -->
    <div class="menu-overlay" id="menuOverlay"></div>
    <div class="menu-content" id="menuContent">
        <div class="menu-section">
            <div class="menu-title">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
            <div class="menu-item">
                <span>üåô –¢–µ–º–Ω–∞—è —Ç–µ–º–∞</span>
                <label class="switch">
                    <input type="checkbox" id="themeToggle" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="menu-item">
                <span>üì≥ –í–∏–±—Ä–∞—Ü–∏—è</span>
                <label class="switch">
                    <input type="checkbox" id="vibrationToggle" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="menu-item">
                <span>üîä –ó–≤—É–∫–∏</span>
                <label class="switch">
                    <input type="checkbox" id="soundToggle" checked>
                    <span class="slider"></span>
                </label>
            </div>
            <div class="menu-item">
                <span>üéµ –§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞</span>
                <label class="switch">
                    <input type="checkbox" id="musicToggle" checked>
                    <span class="slider"></span>
                </label>
            </div>
        </div>
        
        <!-- –ì–ê–õ–ï–†–ï–Ø –ó–í–ï–†–¨–ö–û–í -->
        <div class="menu-section gallery-section">
            <div class="menu-title">üèÜ –ì–∞–ª–µ—Ä–µ—è –∑–≤–µ—Ä—å–∫–æ–≤</div>
            <div style="color: var(--accent); font-size: 0.9rem; margin-bottom: 10px;">
                –°–æ–±–µ—Ä–∏ –≤—Å–µ—Ö 100 –∑–≤–µ—Ä—å–∫–æ–≤! –û—Ç–∫—Ä—ã–≤–∞–π—Ç–µ –Ω–æ–≤—ã—Ö –∑–∞ –∫–∞–∂–¥—ã–µ 500 –º–æ–Ω–µ—Ç
            </div>
            <div class="gallery-grid" id="galleryGrid">
                <!-- –ó–≤–µ—Ä—å–∫–∏ –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
            </div>
        </div>
        
        <div class="menu-section">
            <div class="menu-title">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
            <div class="menu-item">
                <span>ü™ô –í—Å–µ–≥–æ –º–æ–Ω–µ—Ç:</span>
                <span id="totalCoinsStat">0</span>
            </div>
            <div class="menu-item">
                <span>üíé –ê–ª–º–∞–∑—ã:</span>
                <span id="totalDiamondsStat">0</span>
            </div>
            <div class="menu-item">
                <span>üíñ –°–µ—Ä–¥–µ—á–µ–∫ –∫—É–ø–ª–µ–Ω–æ:</span>
                <span id="heartsBoughtStat">0</span>
            </div>
            <div class="menu-item">
                <span>üïí –í—Ä–µ–º—è –∏–≥—Ä—ã:</span>
                <span id="playTimeStat">0 –º–∏–Ω</span>
            </div>
            <div class="menu-item">
                <span>üêæ –û—Ç–∫—Ä—ã—Ç–æ –∑–≤–µ—Ä—å–∫–æ–≤:</span>
                <span id="animalsUnlockedCount">0/100</span>
            </div>
        </div>
    </div>
    
    <!-- –û–ö–ù–û –ú–ê–ì–ê–ó–ò–ù–ê -->
    <div class="shop-overlay" id="shopOverlay"></div>
    <div class="shop-window" id="shopWindow">
        <div class="shop-window-header">
            <div class="shop-window-title">üõí –ú–∞–≥–∞–∑–∏–Ω —É–ª—É—á—à–µ–Ω–∏–π</div>
            <button class="close-shop" id="closeShop">‚úï</button>
        </div>
        <div id="upgradesList">
            <!-- –£–ª—É—á—à–µ–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å -->
        </div>
    </div>
    
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div class="notification" id="notification"></div>
    
    <div class="container" id="gameContainer">
        <!-- –®–∞–ø–∫–∞ —Å –∞–ª–º–∞–∑–∞–º–∏ -->
        <div class="header-info">
            <div class="diamond-counter">
                üíé <span id="diamondsCounter">0</span>
            </div>
            <div>üíñ –õ—é–±–æ–≤—å –¥–ª—è –î–∏–∞–Ω—ã</div>
        </div>
        
        <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–¥–ø–∏—Å—å -->
        <div class="smile-text">
            <div class="animated-text">üíñ –î–∏–∞–Ω–∫–∞, —É–ª—ã–±–∞–π—Å—è! üíñ</div>
        </div>
        
        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ -->
        <div class="heart-section">
            <button class="heart-btn" id="heartBtn">
                üíñ
            </button>
        </div>
        
        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div class="stats-grid">
            <div class="stat-card">
                <span class="stat-icon">ü™ô</span>
                <span class="stat-value" id="coins">0</span>
                <div class="stat-label">–ú–æ–Ω–µ—Ç—ã</div>
            </div>
            <div class="stat-card">
                <span class="stat-icon">üíñ</span>
                <span class="stat-value" id="hearts">0</span>
                <div class="stat-label">–°–µ—Ä–¥–µ—á–∫–∏</div>
            </div>
            <div class="stat-card">
                <span class="stat-icon">‚ö°</span>
                <span class="stat-value" id="heartsPerSecond">0</span>
                <div class="stat-label">–í —Å–µ–∫—É–Ω–¥—É</div>
            </div>
            <div class="stat-card">
                <span class="stat-icon">üí™</span>
                <span class="stat-value" id="clickPower">1</span>
                <div class="stat-label">–°–∏–ª–∞ –∫–ª–∏–∫–∞</div>
            </div>
        </div>
    </div>

    <script>
        // ========== –§–ò–ö–° –î–õ–Ø –°–û–•–†–ê–ù–ï–ù–ò–Ø –°–¢–ê–†–û–ì–û –ü–†–û–ì–†–ï–°–°–ê ==========
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ä—ã–π –∫–ª—é—á —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏
        const OLD_SAVE_KEYS = [
            'loveClicker_v6',
            'loveClicker_optimized',
            'loveClicker_optimized_v2'
        ];
        
        // –ù–æ–≤—ã–π –∫–ª—é—á –¥–ª—è —ç—Ç–æ–π –≤–µ—Ä—Å–∏–∏
        const CURRENT_SAVE_KEY = 'loveClicker_fixed_v3';
        
        // ========== –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï ==========
        let game = {
            coins: 0,
            hearts: 0,
            clickPower: 1,
            heartsPerSecond: 0,
            diamonds: 0,
            totalCoinsEarned: 0,
            lastBonusCoins: 0,
            lastDiamondBonus: 0,
            heartsBought: 0,
            playTime: 0,
            unlockedAnimals: 0,
            lastUpdate: Date.now(),
            last500CoinsNotification: 0,
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            darkTheme: true,
            vibration: true,
            sound: true,
            musicEnabled: true,
            
            // –ú–∞–≥–∞–∑–∏–Ω —É–ª—É—á—à–µ–Ω–∏–π
            upgrades: [],
            specialHeartCount: 0,
            diamondBonusCount: 0
        };
        
        // ========== –≠–ö–†–ê–ù –ó–ê–ì–†–£–ó–ö–ò –ò –ù–ê–ß–ê–õ–û –ò–ì–†–´ ==========
        const loadingScreen = document.getElementById('loadingScreen');
        const startButton = document.getElementById('startButton');
        const gameContainer = document.getElementById('gameContainer');
        const menuButton = document.getElementById('menuButton');
        const shopButton = document.getElementById('shopButton');
        const backgroundMusic = document.getElementById('backgroundMusic');

        function startGame() {
            loadingScreen.style.opacity = '0';
            loadingScreen.style.transform = 'scale(1.1)';
            
            setTimeout(() => {
                loadingScreen.style.display = 'none';
                gameContainer.classList.add('show');
                menuButton.classList.add('show');
                shopButton.classList.add('show');
                
                initGamePlay();
                
                setTimeout(() => {
                    if (game.musicEnabled) {
                        playMusic();
                    }
                }, 1000);
            }, 500);
        }

        startButton.addEventListener('click', startGame);
        
        // ========== –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø –ú–£–ó–´–ö–ê ==========
        let isMusicPlaying = false;

        function playMusic() {
            if (game.musicEnabled && !isMusicPlaying) {
                backgroundMusic.volume = 0.2;
                backgroundMusic.play().then(() => {
                    isMusicPlaying = true;
                }).catch(error => {
                    console.log('–ê–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ');
                });
            }
        }

        function toggleMusic() {
            game.musicEnabled = !game.musicEnabled;
            document.getElementById('musicToggle').checked = game.musicEnabled;
            
            if (game.musicEnabled) {
                playMusic();
            } else {
                backgroundMusic.pause();
                isMusicPlaying = false;
            }
            saveGame();
        }

        document.getElementById('musicToggle').addEventListener('change', toggleMusic);

        // ========== –ú–ê–ì–ê–ó–ò–ù –û–ö–ù–û ==========
        const shopOverlay = document.getElementById('shopOverlay');
        const shopWindow = document.getElementById('shopWindow');
        const closeShop = document.getElementById('closeShop');

        function openShop() {
            shopOverlay.style.display = 'block';
            setTimeout(() => {
                shopWindow.style.bottom = '0';
            }, 10);
            renderShopUpgrades();
        }
        
        function closeShopWindow() {
            shopWindow.style.bottom = '-100%';
            setTimeout(() => {
                shopOverlay.style.display = 'none';
            }, 400);
        }

        shopButton.addEventListener('click', openShop);
        shopOverlay.addEventListener('click', closeShopWindow);
        closeShop.addEventListener('click', closeShopWindow);

        // ========== –≠–õ–ï–ú–ï–ù–¢–´ DOM ==========
        const heartBtn = document.getElementById('heartBtn');
        const coinsEl = document.getElementById('coins');
        const heartsEl = document.getElementById('hearts');
        const heartsPerSecondEl = document.getElementById('heartsPerSecond');
        const clickPowerEl = document.getElementById('clickPower');
        const diamondsCounter = document.getElementById('diamondsCounter');
        const upgradesList = document.getElementById('upgradesList');
        const notification = document.getElementById('notification');
        const galleryGrid = document.getElementById('galleryGrid');
        const animalsUnlockedCount = document.getElementById('animalsUnlockedCount');
        
        // –ú–µ–Ω—é —ç–ª–µ–º–µ–Ω—Ç—ã
        const menuOverlay = document.getElementById('menuOverlay');
        const menuContent = document.getElementById('menuContent');
        const themeToggle = document.getElementById('themeToggle');
        const vibrationToggle = document.getElementById('vibrationToggle');
        const soundToggle = document.getElementById('soundToggle');
        const totalCoinsStat = document.getElementById('totalCoinsStat');
        const totalDiamondsStat = document.getElementById('totalDiamondsStat');
        const heartsBoughtStat = document.getElementById('heartsBoughtStat');
        const playTimeStat = document.getElementById('playTimeStat');

        // ========== 100 –ó–í–ï–†–¨–ö–û–í (50 + 50 –Ω–æ–≤—ã—Ö) ==========
        const animals = [
            // –ü–µ—Ä–≤—ã–µ 50 –∑–≤–µ—Ä—å–∫–æ–≤
            "üê∂", "üê±", "üê≠", "üêπ", "üê∞", "ü¶ä", "üêª", "üêº", "üê®", "üêØ",
            "ü¶Å", "üêÆ", "üê∑", "üê∏", "üêµ", "üêî", "üêß", "üê¶", "üê§", "ü¶Ü",
            "ü¶Ö", "ü¶â", "ü¶á", "üê∫", "üêó", "üê¥", "ü¶Ñ", "üêù", "üêõ", "ü¶ã",
            "üêå", "üêû", "üêú", "ü¶ü", "ü¶ó", "üï∑", "ü¶Ç", "üê¢", "üêç", "ü¶é",
            "üêô", "ü¶ë", "ü¶ê", "ü¶û", "üê°", "üê†", "üêü", "üê¨", "üê≥", "ü¶à",
            
            // 50 –Ω–æ–≤—ã—Ö –∑–≤–µ—Ä—å–∫–æ–≤
            "ü¶í", "ü¶ò", "ü¶°", "ü¶É", "ü¶ö", "ü¶ú", "ü¶¢", "ü¶©", "ü¶•", "ü¶¶",
            "ü¶®", "ü¶´", "ü¶Æ", "üêï‚Äçü¶∫", "üê©", "üêà‚Äç‚¨õ", "ü™∞", "ü™±", "ü™≤", "ü™≥",
            "ü™∞", "ü¶â", "ü¶§", "ü¶≠", "üêøÔ∏è", "ü¶î", "ü¶ì", "ü¶è", "ü¶õ", "ü¶å",
            "üê™", "üê´", "ü¶ô", "ü¶í", "ü¶ò", "ü¶•", "ü¶¶", "ü¶®", "ü¶°", "üêæ",
            "ü¶ã", "üêõ", "üêå", "ü¶ó", "üêú", "ü¶ü", "ü¶Ç", "üï∏Ô∏è", "ü¶†", "üß¨"
        ];

        // ========== –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –ú–ê–ì–ê–ó–ò–ù –£–õ–£–ß–®–ï–ù–ò–ô ==========
        function initUpgrades() {
            game.upgrades = [
                { 
                    id: 1, 
                    name: "üíñ –ú–∏–ª–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ", 
                    description: "–ú–∞–ª–µ–Ω—å–∫–∞—è –ø–æ—Ä—Ü–∏—è –ª—é–±–≤–∏", 
                    baseCost: 20, 
                    cost: 20, 
                    heartsPerSecond: 1, 
                    count: 0,
                    requiredCount: 0,
                    unlocked: true
                },
                { 
                    id: 2, 
                    name: "üíï –ü–∞—Ä—è—â–µ–µ —Å–µ—Ä–¥–µ—á–∫–æ", 
                    description: "–õ–µ—Ç–∞–µ—Ç –≤–æ–∫—Ä—É–≥ —ç–∫—Ä–∞–Ω–∞", 
                    baseCost: 75, 
                    cost: 75, 
                    heartsPerSecond: 3, 
                    count: 0,
                    requiredCount: 0,
                    unlocked: false
                },
                { 
                    id: 3, 
                    name: "üíò –°–µ—Ä–¥—Ü–µ –ö—É–ø–∏–¥–æ–Ω–∞", 
                    description: "–°—Ç—Ä–µ–ª–∞ –ø–æ–ø–∞–¥–∞–µ—Ç –ø—Ä—è–º–æ –≤ —Ü–µ–ª—å", 
                    baseCost: 250, 
                    cost: 250, 
                    heartsPerSecond: 10, 
                    count: 0,
                    requiredCount: 10,
                    unlocked: false
                },
                { 
                    id: 4, 
                    name: "üíù –ü–æ–¥–∞—Ä–æ—á–Ω–æ–µ —Å–µ—Ä–¥—Ü–µ", 
                    description: "–° –∫—Ä–∞—Å–∏–≤—ã–º –±–∞–Ω—Ç–∏–∫–æ–º", 
                    baseCost: 750, 
                    cost: 750, 
                    heartsPerSecond: 25, 
                    count: 0,
                    requiredCount: 20,
                    unlocked: false
                },
                { 
                    id: 5, 
                    name: "üêµ –û–±–µ–∑—å—è–Ω–∫–∞ –ª—é–±–≤–∏", 
                    description: "–ó–∞–±–∞–≤–Ω—ã–π –ø–æ–º–æ—â–Ω–∏–∫ –≤–ª—é–±–ª–µ–Ω–Ω—ã—Ö", 
                    baseCost: 2000, 
                    cost: 2000, 
                    heartsPerSecond: 70, 
                    count: 0,
                    requiredCount: 30,
                    unlocked: false
                },
                { 
                    id: 6, 
                    name: "üëë –ó–æ–ª–æ—Ç–æ–µ —Å–µ—Ä–¥—Ü–µ", 
                    description: "–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –ª—é–±–≤–∏", 
                    baseCost: 5000, 
                    cost: 5000, 
                    heartsPerSecond: 200, 
                    count: 0,
                    requiredCount: 40,
                    unlocked: false
                }
            ];
        }

        // –°–µ—Ä–¥–µ—á–∫–æ –¥–ª—è –î–∏–∞–Ω—ã
        const specialHeartUpgrade = {
            id: 100, 
            name: "üíù –°–µ—Ä–¥–µ—á–∫–æ –¥–ª—è –î–∏–∞–Ω—ã", 
            description: "–û—Å–æ–±–µ–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ - –¥–∞—Ä–∏—Ç 250 –º–æ–Ω–µ—Ç", 
            diamondCost: 5,
            count: 0
        };
        
        // –ë–æ–Ω—É—Å 500 –º–æ–Ω–µ—Ç
        const diamondBonusUpgrade = {
            id: 101, 
            name: "üí∞ –ë–æ–Ω—É—Å 500 –º–æ–Ω–µ—Ç", 
            description: "–î–∞—Ä–∏—Ç 500 –º–æ–Ω–µ—Ç!", 
            diamondCost: 10,
            count: 0
        };

        // –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø –ì–ê–õ–ï–†–ï–Ø
        function renderGallery() {
            const fragment = document.createDocumentFragment();
            
            for (let i = 0; i < 100; i++) {
                const isUnlocked = i < game.unlockedAnimals;
                const galleryItem = document.createElement('div');
                galleryItem.className = `gallery-item ${isUnlocked ? 'unlocked' : 'locked'}`;
                
                if (isUnlocked) {
                    galleryItem.innerHTML = `
                        <div class="animal-emoji">${animals[i]}</div>
                        <div class="animal-status unlocked">
                            –æ—Ç–∫—Ä—ã—Ç–æ
                        </div>
                    `;
                    galleryItem.title = `–ó–≤–µ—Ä—ë–∫ ${i + 1}`;
                } else {
                    galleryItem.innerHTML = `
                        <div class="animal-emoji">‚ùì</div>
                        <div class="animal-status locked">
                            ???
                        </div>
                    `;
                    galleryItem.title = '–ï—â—ë –Ω–µ –æ—Ç–∫—Ä—ã—Ç';
                }
                
                fragment.appendChild(galleryItem);
            }
            
            galleryGrid.innerHTML = '';
            galleryGrid.appendChild(fragment);
            animalsUnlockedCount.textContent = `${game.unlockedAnimals}/100`;
        }

        // ========== –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–´–ô –ò–ì–†–û–í–û–ô –¶–ò–ö–õ ==========
        let gameLoopRunning = false;
        let lastGameLoop = 0;
        
        function optimizedGameLoop(timestamp) {
            if (!gameLoopRunning) return;
            
            if (!lastGameLoop) lastGameLoop = timestamp;
            const delta = Math.min(timestamp - lastGameLoop, 1000);
            
            if (game.heartsPerSecond > 0) {
                game.hearts += (game.heartsPerSecond * delta) / 1000;
                
                if (game.hearts >= 10) {
                    const earnedCoins = Math.floor(game.hearts / 10);
                    if (earnedCoins > 0) {
                        addCoins(earnedCoins);
                        game.hearts = game.hearts % 10;
                        checkProgression();
                    }
                }
            }
            
            if (timestamp - game.lastUpdate > 100) {
                updateDisplay();
                game.lastUpdate = timestamp;
            }
            
            lastGameLoop = timestamp;
            requestAnimationFrame(optimizedGameLoop);
        }

        function addCoins(amount) {
            game.coins += amount;
            game.totalCoinsEarned += amount;
        }

        function checkProgression() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–ª–º–∞–∑—ã –∫–∞–∂–¥—ã–µ 100 –º–æ–Ω–µ—Ç
            if (game.totalCoinsEarned >= 100 && game.totalCoinsEarned >= game.lastDiamondBonus + 100) {
                const diamondsEarned = Math.floor((game.totalCoinsEarned - game.lastDiamondBonus) / 100);
                if (diamondsEarned > 0) {
                    game.diamonds += diamondsEarned;
                    game.lastDiamondBonus = game.totalCoinsEarned - (game.totalCoinsEarned % 100);
                    showNotification(`üíé –ü–æ–ª—É—á–µ–Ω–æ ${diamondsEarned} –∞–ª–º–∞–∑${diamondsEarned > 1 ? '–∞' : ''} –∑–∞ –º–æ–Ω–µ—Ç—ã!`);
                    updateDiamondsDisplay();
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–≤–µ—Ä—å–∫–æ–≤ –∫–∞–∂–¥—ã–µ 500 –º–æ–Ω–µ—Ç
            const earnedAnimals = Math.floor(game.totalCoinsEarned / 500);
            if (earnedAnimals > game.unlockedAnimals && earnedAnimals <= 100) {
                const newAnimals = earnedAnimals - game.unlockedAnimals;
                game.unlockedAnimals = earnedAnimals;
                
                if (newAnimals > 0) {
                    showNotification(`üéâ –û—Ç–∫—Ä—ã—Ç${newAnimals > 1 ? '–æ' : ''} ${newAnimals} –Ω–æ–≤—ã–π${newAnimals > 1 ? '—ã—Ö' : ''} –∑–≤–µ—Ä${newAnimals > 1 ? '—å–∫–æ–≤' : '—ë–∫'}!`);
                    renderGallery();
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 500 –º–æ–Ω–µ—Ç
            if (game.totalCoinsEarned >= 500 && game.totalCoinsEarned >= game.last500CoinsNotification + 500) {
                game.last500CoinsNotification = game.totalCoinsEarned - (game.totalCoinsEarned % 500);
                showNotification("üíù –ú–æ—è —Ç—ã —É–º–Ω–∏—á–∫–∞! –£–∂–µ " + game.last500CoinsNotification + " –º–æ–Ω–µ—Ç! üíñ");
            }
        }

        function updateDisplay() {
            coinsEl.textContent = Math.floor(game.coins);
            heartsEl.textContent = game.hearts.toFixed(1);
            heartsPerSecondEl.textContent = game.heartsPerSecond.toFixed(1);
            clickPowerEl.textContent = game.clickPower;
            diamondsCounter.textContent = game.diamonds;
        }

        function updateDiamondsDisplay() {
            diamondsCounter.textContent = game.diamonds;
            totalDiamondsStat.textContent = game.diamonds;
        }

        // ========== –§–ò–ö–°–ò–†–û–í–ê–ù–ù–û–ï –°–û–•–†–ê–ù–ï–ù–ò–ï ==========
        let autoSaveInterval;
        
        function saveGame() {
            try {
                const saveData = {
                    // –û—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä—ã
                    coins: game.coins,
                    hearts: game.hearts,
                    clickPower: game.clickPower,
                    heartsPerSecond: game.heartsPerSecond,
                    diamonds: game.diamonds,
                    totalCoinsEarned: game.totalCoinsEarned,
                    heartsBought: game.heartsBought,
                    playTime: game.playTime,
                    unlockedAnimals: game.unlockedAnimals,
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                    darkTheme: game.darkTheme,
                    vibration: game.vibration,
                    sound: game.sound,
                    musicEnabled: game.musicEnabled,
                    
                    // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                    specialHeartCount: specialHeartUpgrade.count,
                    diamondBonusCount: diamondBonusUpgrade.count,
                    
                    // –í–µ—Ä—Å–∏—è –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
                    saveTime: Date.now(),
                    version: 'fixed_v3'
                };
                
                localStorage.setItem(CURRENT_SAVE_KEY, JSON.stringify(saveData));
                showSaveIcon();
                console.log('–ò–≥—Ä–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!');
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
            }
        }
        
        function loadGame() {
            try {
                console.log('–ü—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...');
                
                // –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ –Ω–æ–≤–æ–≥–æ –∫–ª—é—á–∞
                let savedData = localStorage.getItem(CURRENT_SAVE_KEY);
                if (savedData) {
                    console.log('–ù–∞–π–¥–µ–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –Ω–æ–≤–æ–º –∫–ª—é—á–µ:', CURRENT_SAVE_KEY);
                    const save = JSON.parse(savedData);
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                    game.coins = save.coins || 0;
                    game.hearts = save.hearts || 0;
                    game.clickPower = save.clickPower || 1;
                    game.heartsPerSecond = save.heartsPerSecond || 0;
                    game.diamonds = save.diamonds || 0;
                    game.totalCoinsEarned = save.totalCoinsEarned || 0;
                    game.heartsBought = save.heartsBought || 0;
                    game.playTime = save.playTime || 0;
                    game.unlockedAnimals = save.unlockedAnimals || 0;
                    
                    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                    game.darkTheme = save.darkTheme !== undefined ? save.darkTheme : true;
                    game.vibration = save.vibration !== undefined ? save.vibration : true;
                    game.sound = save.sound !== undefined ? save.sound : true;
                    game.musicEnabled = save.musicEnabled !== undefined ? save.musicEnabled : true;
                    
                    // –ó–∞–≥—Ä—É–∂–∞–µ–º —É–ª—É—á—à–µ–Ω–∏—è –µ—Å–ª–∏ –µ—Å—Ç—å
                    if (save.specialHeartCount !== undefined) {
                        specialHeartUpgrade.count = save.specialHeartCount;
                    }
                    if (save.diamondBonusCount !== undefined) {
                        diamondBonusUpgrade.count = save.diamondBonusCount;
                    }
                    
                    console.log('–£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ –Ω–æ–≤–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è!');
                    return true;
                }
                
                // –ï—Å–ª–∏ –Ω–µ—Ç –Ω–æ–≤–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è, –ø—Ä–æ–±—É–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –∏–∑ —Å—Ç–∞—Ä—ã—Ö –∫–ª—é—á–µ–π
                console.log('–ù–æ–≤–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–µ—Ç, –∏—â–µ–º —Å—Ç–∞—Ä–æ–µ...');
                
                for (const oldKey of OLD_SAVE_KEYS) {
                    savedData = localStorage.getItem(oldKey);
                    if (savedData) {
                        console.log('–ù–∞–π–¥–µ–Ω–æ —Å—Ç–∞—Ä–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∫–ª—é—á–µ:', oldKey);
                        try {
                            const oldSave = JSON.parse(savedData);
                            
                            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å—Ç–∞—Ä–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
                            if (oldSave.game) {
                                // –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (game –æ–±—ä–µ–∫—Ç)
                                game.coins = oldSave.game.coins || 0;
                                game.hearts = oldSave.game.hearts || 0;
                                game.clickPower = oldSave.game.clickPower || 1;
                                game.heartsPerSecond = oldSave.game.heartsPerSecond || 0;
                                game.diamonds = oldSave.game.diamonds || 0;
                                game.totalCoinsEarned = oldSave.game.totalCoinsEarned || 0;
                                game.heartsBought = oldSave.game.heartsBought || 0;
                                game.playTime = oldSave.game.playTime || 0;
                                game.unlockedAnimals = oldSave.game.unlockedAnimals || 0;
                                
                                // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                                game.darkTheme = oldSave.game.darkTheme !== undefined ? oldSave.game.darkTheme : true;
                                game.vibration = oldSave.game.vibration !== undefined ? oldSave.game.vibration : true;
                                game.sound = oldSave.game.sound !== undefined ? oldSave.game.sound : true;
                                game.musicEnabled = oldSave.game.musicEnabled !== undefined ? oldSave.game.musicEnabled : true;
                                
                                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                                if (oldSave.specialHeartCount !== undefined) {
                                    specialHeartUpgrade.count = oldSave.specialHeartCount;
                                }
                                if (oldSave.diamondBonusCount !== undefined) {
                                    diamondBonusUpgrade.count = oldSave.diamondBonusCount;
                                }
                            } else {
                                // –°—Ç–∞—Ä–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–ø—Ä—è–º—ã–µ –ø–æ–ª—è)
                                game.coins = oldSave.coins || 0;
                                game.hearts = oldSave.hearts || 0;
                                game.clickPower = oldSave.clickPower || 1;
                                game.heartsPerSecond = oldSave.heartsPerSecond || 0;
                                game.diamonds = oldSave.diamonds || 0;
                                game.totalCoinsEarned = oldSave.totalCoinsEarned || 0;
                                game.heartsBought = oldSave.heartsBought || 0;
                                game.playTime = oldSave.playTime || 0;
                                game.unlockedAnimals = oldSave.unlockedAnimals || 0;
                                
                                // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                                game.darkTheme = oldSave.darkTheme !== undefined ? oldSave.darkTheme : true;
                                game.vibration = oldSave.vibration !== undefined ? oldSave.vibration : true;
                                game.sound = oldSave.sound !== undefined ? oldSave.sound : true;
                                game.musicEnabled = oldSave.musicEnabled !== undefined ? oldSave.musicEnabled : true;
                                
                                // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
                                if (oldSave.diamondBonusCount !== undefined) {
                                    diamondBonusUpgrade.count = oldSave.diamondBonusCount;
                                }
                                if (oldSave.specialHeartCount !== undefined) {
                                    specialHeartUpgrade.count = oldSave.specialHeartCount;
                                }
                            }
                            
                            console.log('–£—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è!');
                            
                            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –Ω–æ–≤–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
                            saveGame();
                            
                            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –º–∏–≥—Ä–∞—Ü–∏–∏
                            setTimeout(() => {
                                showNotification("‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å —É—Å–ø–µ—à–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è!");
                            }, 1000);
                            
                            return true;
                        } catch (error) {
                            console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ä–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error);
                        }
                    }
                }
                
                console.log('–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –Ω–∞—á–∏–Ω–∞–µ–º –Ω–æ–≤—É—é –∏–≥—Ä—É');
                return false;
                
            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', error);
                return false;
            }
        }
        
        function showSaveIcon() {
            const saveIcon = document.getElementById('saveIcon');
            saveIcon.style.opacity = '1';
            saveIcon.style.transform = 'translateY(0)';
            setTimeout(() => {
                saveIcon.style.opacity = '0';
                saveIcon.style.transform = 'translateY(10px)';
            }, 2000);
        }

        // ========== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´ ==========
        function initGamePlay() {
            console.log('–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã...');
            loadGame();
            initUpgrades();
            
            if (!game.darkTheme) {
                document.body.classList.add('light-theme');
            }
            
            setupMenu();
            startAutoSave();
            startLoveNotifications();
            
            updateDisplay();
            renderShopUpgrades();
            renderGallery();
            
            gameLoopRunning = true;
            requestAnimationFrame(optimizedGameLoop);
            
            setInterval(() => {
                game.playTime++;
                if (game.playTime % 60 === 0) {
                    updateMenuStats();
                }
            }, 1000);
            
            window.addEventListener('beforeunload', saveGame);
            window.addEventListener('pagehide', saveGame);
            
            showNotification("üíñ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∏–≥—Ä—É!");
            console.log('–ò–≥—Ä–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞!');
        }

        function startAutoSave() {
            if (autoSaveInterval) clearInterval(autoSaveInterval);
            autoSaveInterval = setInterval(saveGame, 30000);
        }

        function startLoveNotifications() {
            setInterval(() => {
                const notification = document.createElement('div');
                notification.className = 'love-notification';
                notification.textContent = '–Ω–µ –∑–∞–±—ã–≤–∞–π —á—Ç–æ —è —Ç–µ–±—è –ª—é–±–ª—é üíñ';
                notification.style.animation = 'loveNotification 10s ease-in-out forwards';
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.remove();
                    }
                }, 10000);
            }, 120000);
        }

        // ========== –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–û–ï –ú–ï–ù–Æ ==========
        function setupMenu() {
            menuButton.addEventListener('click', toggleMenu);
            menuOverlay.addEventListener('click', closeMenu);
            
            themeToggle.addEventListener('change', toggleTheme);
            vibrationToggle.addEventListener('change', toggleVibration);
            soundToggle.addEventListener('change', toggleSound);
            
            themeToggle.checked = game.darkTheme;
            vibrationToggle.checked = game.vibration;
            soundToggle.checked = game.sound;
        }
        
        function toggleMenu() {
            if (menuContent.style.right === '0px') {
                closeMenu();
            } else {
                openMenu();
            }
        }
        
        function openMenu() {
            menuOverlay.style.display = 'block';
            menuContent.style.right = '0';
            updateMenuStats();
            renderGallery();
        }
        
        function closeMenu() {
            menuOverlay.style.display = 'none';
            menuContent.style.right = '-350px';
        }
        
        function toggleTheme() {
            game.darkTheme = !game.darkTheme;
            if (game.darkTheme) {
                document.body.classList.remove('light-theme');
            } else {
                document.body.classList.add('light-theme');
            }
            saveGame();
        }
        
        function toggleVibration() {
            game.vibration = !game.vibration;
            if (game.vibration && navigator.vibrate) {
                navigator.vibrate(50);
            }
            saveGame();
        }
        
        function toggleSound() {
            game.sound = !game.sound;
            saveGame();
        }
        
        function updateMenuStats() {
            const minutes = Math.floor(game.playTime / 60);
            const hours = Math.floor(minutes / 60);
            let timeText = '';
            
            if (hours > 0) {
                timeText = `${hours} —á ${minutes % 60} –º–∏–Ω`;
            } else {
                timeText = `${minutes} –º–∏–Ω`;
            }
            
            playTimeStat.textContent = timeText;
            totalCoinsStat.textContent = game.totalCoinsEarned;
            totalDiamondsStat.textContent = game.diamonds;
            heartsBoughtStat.textContent = game.heartsBought;
            animalsUnlockedCount.textContent = `${game.unlockedAnimals}/100`;
        }

        // ========== –§–£–ù–ö–¶–ò–ò –ú–ê–ì–ê–ó–ò–ù–ê ==========
        function renderShopUpgrades() {
            if (!upgradesList) return;
            
            const fragment = document.createDocumentFragment();
            
            // –û–±—ã—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
            game.upgrades.forEach(upgrade => {
                const totalCount = game.upgrades.reduce((sum, u) => sum + u.count, 0);
                upgrade.unlocked = totalCount >= upgrade.requiredCount;
                
                const canAfford = game.coins >= upgrade.cost && upgrade.unlocked;
                const upgradeEl = createShopUpgradeElement(upgrade, canAfford);
                fragment.appendChild(upgradeEl);
            });
            
            // –£–ª—É—á—à–µ–Ω–∏–µ —Å–∏–ª—ã –∫–ª–∏–∫–∞
            const clickUpgradeCost = game.clickPower * 100;
            const canAffordClick = game.coins >= clickUpgradeCost;
            const clickUpgradeEl = document.createElement('div');
            clickUpgradeEl.className = 'upgrade-item';
            clickUpgradeEl.innerHTML = `
                <div class="upgrade-header">
                    <div class="upgrade-name">üí™ –£—Å–∏–ª–µ–Ω–∏–µ –∫–ª–∏–∫–∞</div>
                    <div class="upgrade-cost">${clickUpgradeCost} ü™ô</div>
                </div>
                <div style="color: var(--accent); font-size: 0.9rem; margin: 5px 0;">
                    –£–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Å–∏–ª—É –∫–∞–∂–¥–æ–≥–æ –∫–ª–∏–∫–∞
                </div>
                <div class="upgrade-info">
                    <div>–¢–µ–∫—É—â–∞—è —Å–∏–ª–∞: ${game.clickPower}</div>
                    <div>–°–ª–µ–¥—É—é—â–∞—è: ${game.clickPower + 1}</div>
                </div>
                <button class="buy-btn ${canAffordClick ? 'enabled' : 'disabled'}" 
                        onclick="upgradeClickPower()" 
                        ${canAffordClick ? '' : 'disabled'}>
                    ${canAffordClick ? '–ù—É –≤—Å–µ, —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ üí™' : '–ù–µ –Ω–µ –Ω–µ, –µ—â–µ —Å–æ–±–µ—Ä–∏'}
                </button>
            `;
            fragment.appendChild(clickUpgradeEl);
            
            // –û—Å–æ–±–æ–µ —Å–µ—Ä–¥–µ—á–∫–æ –¥–ª—è –î–∏–∞–Ω—ã
            const canAffordHeart = game.diamonds >= specialHeartUpgrade.diamondCost;
            const specialHeartEl = document.createElement('div');
            specialHeartEl.className = 'upgrade-item';
            specialHeartEl.style.borderColor = '#ff6b8b';
            specialHeartEl.style.boxShadow = '0 5px 15px rgba(255, 107, 139, 0.1)';
            specialHeartEl.innerHTML = `
                <div class="upgrade-header">
                    <div class="upgrade-name">${specialHeartUpgrade.name}</div>
                    <div class="diamond-cost">${specialHeartUpgrade.diamondCost} üíé</div>
                </div>
                <div style="color: var(--accent); font-size: 0.9rem; margin: 5px 0;">
                    ${specialHeartUpgrade.description}
                </div>
                <div class="upgrade-info">
                    <div>–ö—É–ø–ª–µ–Ω–æ: ${specialHeartUpgrade.count}</div>
                    <div>+250 –º–æ–Ω–µ—Ç üí∞</div>
                </div>
                <button class="buy-btn ${canAffordHeart ? 'enabled' : 'disabled'}" 
                        onclick="buySpecialHeart()" 
                        ${canAffordHeart ? '' : 'disabled'}
                        style="background: linear-gradient(45deg, #ff6b8b, #c77dff);">
                    ${canAffordHeart ? '–ù—É –≤—Å–µ, —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ üíù' : '–ù–µ –Ω–µ –Ω–µ, –µ—â–µ —Å–æ–±–µ—Ä–∏'}
                </button>
            `;
            fragment.appendChild(specialHeartEl);
            
            // –ë–æ–Ω—É—Å 500 –º–æ–Ω–µ—Ç –∑–∞ –∞–ª–º–∞–∑—ã
            const canAffordBonus = game.diamonds >= diamondBonusUpgrade.diamondCost;
            const diamondBonusEl = document.createElement('div');
            diamondBonusEl.className = 'upgrade-item';
            diamondBonusEl.style.borderColor = '#ffd700';
            diamondBonusEl.style.boxShadow = '0 5px 15px rgba(255, 215, 0, 0.1)';
            diamondBonusEl.innerHTML = `
                <div class="upgrade-header">
                    <div class="upgrade-name">${diamondBonusUpgrade.name}</div>
                    <div class="diamond-cost">${diamondBonusUpgrade.diamondCost} üíé</div>
                </div>
                <div style="color: var(--accent); font-size: 0.9rem; margin: 5px 0;">
                    ${diamondBonusUpgrade.description}
                </div>
                <div class="upgrade-info">
                    <div>–ö—É–ø–ª–µ–Ω–æ: ${diamondBonusUpgrade.count}</div>
                    <div>–û–≥—Ä–æ–º–Ω—ã–π –±–æ–Ω—É—Å!</div>
                </div>
                <button class="buy-btn ${canAffordBonus ? 'enabled' : 'disabled'}" 
                        onclick="buyDiamondBonus()" 
                        ${canAffordBonus ? '' : 'disabled'}
                        style="background: linear-gradient(45deg, #ffd700, #ff6b8b);">
                    ${canAffordBonus ? '–ù—É –≤—Å–µ, —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ üíé' : '–ù–µ –Ω–µ –Ω–µ, –µ—â–µ —Å–æ–±–µ—Ä–∏'}
                </button>
            `;
            fragment.appendChild(diamondBonusEl);
            
            upgradesList.innerHTML = '';
            upgradesList.appendChild(fragment);
        }

        function createShopUpgradeElement(upgrade, canAfford) {
            const div = document.createElement('div');
            const isLocked = !upgrade.unlocked;
            div.className = `upgrade-item ${isLocked ? 'locked' : ''}`;
            
            const requirementText = isLocked ? 
                `üîí –û—Ç–∫—Ä–æ–µ—Ç—Å—è –ø–æ—Å–ª–µ ${upgrade.requiredCount} —Å–µ—Ä–¥–µ—á–µ–∫` : 
                '';
            
            const buttonText = canAfford ? 
                '–ù—É –≤—Å–µ, —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ üíù' : 
                '–ù–µ –Ω–µ –Ω–µ, –µ—â–µ —Å–æ–±–µ—Ä–∏';
                
            div.innerHTML = `
                <div class="upgrade-header">
                    <div class="upgrade-name">
                        ${isLocked ? 'üîí' : ''} ${upgrade.name}
                    </div>
                    <div class="upgrade-cost">${upgrade.cost} ü™ô</div>
                </div>
                <div style="color: var(--accent); font-size: 0.9rem; margin: 5px 0;">
                    ${upgrade.description}
                </div>
                ${requirementText ? `<div class="upgrade-requirement">${requirementText}</div>` : ''}
                <div class="upgrade-info">
                    <div class="upgrade-effect">
                        <span>+${upgrade.heartsPerSecond} üíñ/—Å–µ–∫</span>
                    </div>
                    <div class="upgrade-count">
                        –ö—É–ø–ª–µ–Ω–æ: ${upgrade.count}
                    </div>
                </div>
                <button class="buy-btn ${canAfford && !isLocked ? 'enabled' : 'disabled'}" 
                        onclick="buyUpgrade(${upgrade.id})" 
                        ${canAfford && !isLocked ? '' : 'disabled'}>
                    ${buttonText}
                </button>
            `;
            return div;
        }

        function buyUpgrade(id) {
            const upgrade = game.upgrades.find(u => u.id === id);
            if (!upgrade || !upgrade.unlocked || game.coins < upgrade.cost) return;
            
            game.coins -= upgrade.cost;
            game.heartsPerSecond += upgrade.heartsPerSecond;
            upgrade.count++;
            upgrade.cost = Math.floor(upgrade.baseCost * Math.pow(1.5, upgrade.count));
            
            updateDisplay();
            renderShopUpgrades();
            showNotification(`üéâ –ö—É–ø–∏–ª–∏ ${upgrade.name}!`);
            saveGame();
        }
        
        function upgradeClickPower() {
            const cost = game.clickPower * 100;
            if (game.coins < cost) return;
            
            game.coins -= cost;
            game.clickPower += 1;
            updateDisplay();
            renderShopUpgrades();
            showNotification(`üí™ –°–∏–ª–∞ –∫–ª–∏–∫–∞: ${game.clickPower}`);
            saveGame();
        }
        
        function buySpecialHeart() {
            if (game.diamonds < specialHeartUpgrade.diamondCost) {
                showNotification(`üíé –ù–µ –Ω–µ –Ω–µ, –µ—â–µ —Å–æ–±–µ—Ä–∏ –∞–ª–º–∞–∑–æ–≤!`);
                return;
            }
            
            game.diamonds -= specialHeartUpgrade.diamondCost;
            specialHeartUpgrade.count++;
            game.heartsBought++;
            
            addCoins(250);
            
            updateDiamondsDisplay();
            renderShopUpgrades();
            updateMenuStats();
            
            showNotification("üíñ –ú–æ—è —Ç—ã —Ö–æ—Ä–æ—à–∞—è! +250 –º–æ–Ω–µ—Ç –∑–∞ –∞–ª–º–∞–∑—ã!");
            
            if (game.vibration && navigator.vibrate) {
                navigator.vibrate([100, 50, 100]);
            }
            
            saveGame();
        }
        
        function buyDiamondBonus() {
            if (game.diamonds < diamondBonusUpgrade.diamondCost) {
                showNotification(`üíé –ù–µ –Ω–µ –Ω–µ, –µ—â–µ —Å–æ–±–µ—Ä–∏ –∞–ª–º–∞–∑–æ–≤!`);
                return;
            }
            
            game.diamonds -= diamondBonusUpgrade.diamondCost;
            diamondBonusUpgrade.count++;
            
            addCoins(500);
            
            updateDiamondsDisplay();
            renderShopUpgrades();
            
            showNotification("üí∞ +500 –º–æ–Ω–µ—Ç –∑–∞ –∞–ª–º–∞–∑—ã! üíñ");
            
            if (game.vibration && navigator.vibrate) {
                navigator.vibrate([100, 50, 200, 50, 100]);
            }
            
            saveGame();
        }

        // ========== –û–°–ù–û–í–ù–û–ô –ö–õ–ò–ö ==========
        heartBtn.addEventListener('click', () => {
            game.hearts += game.clickPower;
            
            if (game.hearts >= 10) {
                const earnedCoins = Math.floor(game.hearts / 10);
                if (earnedCoins > 0) {
                    addCoins(earnedCoins);
                    game.hearts = game.hearts % 10;
                    checkProgression();
                }
            }
            
            updateDisplay();
        });

        function showNotification(text) {
            notification.textContent = text;
            notification.classList.add('show');
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è HTML
        window.buyUpgrade = buyUpgrade;
        window.upgradeClickPower = upgradeClickPower;
        window.buySpecialHeart = buySpecialHeart;
        window.buyDiamondBonus = buyDiamondBonus;
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
        window.restoreSave = function() {
            console.log('–†—É—á–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è...');
            if (loadGame()) {
                updateDisplay();
                renderShopUpgrades();
                renderGallery();
                showNotification("‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!");
            } else {
                showNotification("‚ùå –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ");
            }
        };
    </script>
</body>
</html>
